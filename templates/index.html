<!DOCTYPE html>
<html lang="en">

<head>
    <style>
        body,
        html {
            margin: 0;
            padding: 0;
            height: 100%;
            width: 100%;
            font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif;
            overflow: hidden; /* Prevents scrollbars */
            display: flex;
            flex-direction: column;
            background-color: black;
        }

        .image-container {
            width: calc(100% + 20px); /* Expands the width by 20px */
            margin-left: -10px; /* Shifts 10px to the left */
            margin-right: -10px; /* Shifts 10px to the right */
            max-height: 90vh; /* The image will take 90% of the viewport height */
            overflow: hidden;
        }

        .background-image {
            width: 100%;
            height: auto;
            object-fit: cover; /* Ensures the image covers the container */
            display: block;
        }

        .content {
            width: 100%;
            min-height: 20vh; /* The reserved div will take 10% of the viewport height */
            background-color: black;
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 2.0em;
        }

        #rsvp-form {
            display: flex;
            flex-direction: column;
            align-items: center;
            height: 100%;
            width: 100%;
            padding: 0px 20px;
            color: white;
        }

        .button-container {
            display: flex; /* Use flexbox to align buttons in a row */
            justify-content: space-between; /* Add space between the buttons */
            width: 100%;
        }

        input, button {
            width: 100%;
            height: 100%;
            font-size: 1.0em;
            box-sizing: border-box; /* Ensures padding is included in the total width */
            color: white;
            background-color: black;
            border: 1px solid white
        }

        input {
            text-align:center;
            margin: 5px 0 5px 0;
            font-size: 1.5em;
        }

        input::placeholder {
            color: wite;
        }
        input:focus, button:focus {
            outline: none; /* Remove default focus outline */
            box-shadow: 0 0 5px white; /* Add an orange glow effect on focus */
        }
        input:hover, button:hover {
            background-color: #333; /* Darken background slightly on hover */
            cursor: pointer; /* Add pointer cursor on hover */
        }
        

    </style>

</head>

<body>
    <div class="image-container">
        <img src="assets/bg.jpeg" alt="Background Image" class="background-image">
    </div>
    <hr>

    <div class="content">
        <form id="rsvp-form">
            <b>Please RSVP Here</b>
            <input type="text" id="name" name="name" placeholder="Enter your name"  required>

            <div class="button-container">
                <button type="submit_yes">I'll be there</button>
                <button type="submit_no">Can't make it</button>
            </div>
        </form>

        <div id="response-message" style="display:none;"></div>
    </div>

</body>

</html>

<script>
    document.getElementById('rsvp-form').addEventListener('submit', function (event) {
        // Prevent the default form submission
        event.preventDefault();

        // Create JSON object
        const formData = {
            name: document.getElementById('name').value,
            coming: document.getElementById('coming').checked
        };

        // Send the form data as JSON using the fetch API
        fetch('/submit', {
            method: 'PUT',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(formData)
        })
            .then((response) => {
                if (response.ok) { return response; }
                throw new Error('Something went wrong');
            })
            .then((response) => {
                // Do something with the response
                console.info(response);
                // Remove the form from the page
                document.getElementById('rsvp-form').style.display = 'none';

                // Display the success message
                const responseMessage = document.getElementById('response-message');
                responseMessage.innerHTML = '<h2>Okay</h2>';
                responseMessage.style.display = 'block';
            })
            .catch((error) => {
                // Handle error - you can alert the user or log the error
                console.error('Error:', error);
                alert('An error occurred during form submission.');
            });
    });
</script>